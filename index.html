
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Incremental - Rarity Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Custom "Hell" Theme Styles */
        body {
            background-color: #050000;
            background-image: 
                radial-gradient(circle at 50% 0%, #3a0000 0%, transparent 70%),
                radial-gradient(circle at 10% 90%, #1a0000 0%, transparent 50%);
            color: #ffcccc;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }

        h1, h2, .fantasy-font {
            font-family: 'Cinzel', serif;
        }

        .hell-card {
            background: rgba(20, 0, 0, 0.85);
            border: 1px solid #5c0000;
            box-shadow: 0 0 20px rgba(255, 69, 0, 0.1), inset 0 0 50px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .input-hell {
            background: #0a0000;
            border: 1px solid #4a0404;
            color: #ff8800;
            transition: all 0.3s ease;
        }

        .input-hell:focus {
            outline: none;
            border-color: #ff4500;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.4);
        }

        .btn-hell {
            background: linear-gradient(45deg, #800000, #ff4500);
            color: white;
            border: 1px solid #ffaa00;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            transition: transform 0.1s, box-shadow 0.3s;
        }

        .btn-hell:hover {
            box-shadow: 0 0 15px #ff4500;
            transform: translateY(-1px);
        }

        .btn-hell:active {
            transform: translateY(1px);
        }

        /* Animated Title Glow */
        .title-glow {
            background: linear-gradient(to bottom, #ffaa00, #ff4500, #8b0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 4px 10px rgba(255, 69, 0, 0.3);
        }

        /* Result Animation */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(255, 69, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 69, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 69, 0, 0); }
        }
        
        .result-box {
            background: linear-gradient(180deg, #1a0505 0%, #2d0a0a 100%);
            border-left: 4px solid #ff4500;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a0000;
        }
        ::-webkit-scrollbar-thumb {
            background: #5c0000;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #ff4500;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div class="max-w-md w-full mx-auto hell-card rounded-2xl p-6 md:p-8 relative overflow-hidden">
        
        <!-- Decoration: Floating Embers (CSS only representation) -->
        <div class="absolute top-0 right-0 w-20 h-20 bg-orange-600 blur-[80px] opacity-20 pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-32 h-32 bg-red-900 blur-[100px] opacity-30 pointer-events-none"></div>

        <!-- Header -->
        <div class="text-center mb-8 relative z-10">
            <h1 class="text-4xl md:text-5xl font-black title-glow mb-2 uppercase tracking-tight">Rarity</h1>
            <h2 class="text-xl md:text-2xl text-orange-700 tracking-widest font-bold uppercase border-b-2 border-red-900 pb-2 inline-block">Calculator</h2>
            <p class="text-xs text-red-400 mt-2 opacity-80 uppercase tracking-wider">Garden Incremental</p>
        </div>

        <!-- Form -->
        <div class="space-y-5 relative z-10">
            
            <!-- Target Input -->
            <div>
                <label class="block text-orange-200 text-sm font-bold mb-2 uppercase tracking-wider">
                    Target Value (e.g. 700T, 20Qd)
                </label>
                <input type="text" id="targetInput" placeholder="Ex: 700T" 
                    class="input-hell w-full p-4 rounded-lg text-lg font-mono placeholder-red-900/50">
            </div>

            <!-- Luck Input -->
            <div>
                <label class="block text-orange-200 text-sm font-bold mb-2 uppercase tracking-wider">
                    Your Luck (e.g. 233M, 1.5B)
                </label>
                <input type="text" id="luckInput" placeholder="Ex: 233M" 
                    class="input-hell w-full p-4 rounded-lg text-lg font-mono placeholder-red-900/50">
            </div>

            <!-- Advanced Settings (Collapsible) -->
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-red-400 text-xs font-bold mb-1 uppercase">Bulk</label>
                    <input type="number" id="bulkInput" value="50" 
                        class="input-hell w-full p-2 rounded text-center font-mono">
                </div>
                <div>
                    <label class="block text-red-400 text-xs font-bold mb-1 uppercase">Speed (sec)</label>
                    <input type="number" id="timeInput" value="0.25" step="0.01" 
                        class="input-hell w-full p-2 rounded text-center font-mono">
                </div>
            </div>

            <!-- Action Button -->
            <button onclick="calculateTime()" 
                class="btn-hell w-full py-4 rounded-xl font-black text-xl tracking-widest uppercase mt-4 fantasy-font">
                Calculate Time
            </button>

            <!-- Error Message -->
            <div id="errorMsg" class="hidden text-red-500 text-center text-sm font-bold bg-black/50 p-2 rounded border border-red-800"></div>

            <!-- Result Display -->
            <div id="resultCard" class="hidden result-box rounded-lg p-5 mt-6 transition-all duration-500">
                <p class="text-red-400 text-xs uppercase tracking-widest mb-1">Time to Unlock</p>
                <div id="timeResult" class="text-2xl md:text-3xl font-mono font-bold text-white text-shadow-md leading-tight break-words">
                    <!-- Result goes here -->
                </div>
                <div class="mt-3 pt-3 border-t border-red-900/50 flex justify-between items-center text-xs text-orange-500/70">
                    <span id="rateDisplay">Rate: 0/sec</span>
                    <span>SUCCESS</span>
                </div>
            </div>

            <!-- Suffix Legend -->
            <div class="mt-8 text-[10px] text-red-900 text-center font-mono uppercase">
                Supported: k, M, B, T, Qd, Qn, sx, Sp, Oc, N, De, UDe, TDe...
            </div>
        </div>
    </div>

    <script>
        // Suffix Multipliers for Garden Incremental
        const multipliers = {
            'k': 1e3,
            'm': 1e6,
            'b': 1e9,
            't': 1e12,
            'qd': 1e15,
            'qn': 1e18,
            'sx': 1e21,
            'sp': 1e24,
            'oc': 1e27,
            'n': 1e30,  // Nonillion
            'no': 1e30, 
            'de': 1e33, // Decillion
            'ude': 1e36,
            'dde': 1e39,
            'tde': 1e42,
            'qade': 1e45,
            'qide': 1e48,
            'sxde': 1e51,
            'spde': 1e54,
            'ocde': 1e57,
            'nvde': 1e60,
            'vg': 1e63
        };

        function parseGameNumber(input) {
            if (!input) return null;
            input = input.trim().toLowerCase();
            
            // Check if it's just a number
            if (!isNaN(input)) return parseFloat(input);

            // Regex to match number and suffix
            // Matches: 100, 100.5, 100k, 100TDe, etc.
            const match = input.match(/^([\d.]+)\s*([a-z]+)$/);
            
            if (match) {
                const value = parseFloat(match[1]);
                const suffix = match[2];
                
                if (multipliers.hasOwnProperty(suffix)) {
                    return value * multipliers[suffix];
                }
            }
            return null;
        }

        function formatTime(seconds) {
            if (seconds < 1) return "Instantly (< 1s)";
            if (seconds < 60) return Math.floor(seconds) + " Seconds";

            const y = Math.floor(seconds / 31536000);
            const d = Math.floor((seconds % 31536000) / 86400);
            const h = Math.floor((seconds % 86400) / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = Math.floor(seconds % 60);

            // Logic to show only the 2 most significant units to keep it clean
            // e.g., "1y 200d" instead of "1y 200d 4h 3m 2s"
            
            if (y > 0) return `${y}y ${d}d`;
            if (d > 0) return `${d}d ${h}h`;
            if (h > 0) return `${h}h ${m}min`;
            return `${m}min ${s}sec`;
        }

        function formatNumber(num) {
            if (num >= 1e12) return (num / 1e12).toFixed(2) + "T";
            if (num >= 1e9) return (num / 1e9).toFixed(2) + "B";
            if (num >= 1e6) return (num / 1e6).toFixed(2) + "M";
            if (num >= 1e3) return (num / 1e3).toFixed(2) + "k";
            return num.toFixed(0);
        }

        function calculateTime() {
            const targetStr = document.getElementById('targetInput').value;
            const luckStr = document.getElementById('luckInput').value;
            const bulk = parseFloat(document.getElementById('bulkInput').value) || 50;
            const timePerRoll = parseFloat(document.getElementById('timeInput').value) || 0.25;
            
            const errorDiv = document.getElementById('errorMsg');
            const resultCard = document.getElementById('resultCard');
            const timeDisplay = document.getElementById('timeResult');
            const rateDisplay = document.getElementById('rateDisplay');

            // Parsing
            const targetVal = parseGameNumber(targetStr);
            const luckVal = parseGameNumber(luckStr);

            // Validation
            if (targetVal === null || luckVal === null) {
                errorDiv.innerText = "Invalid format! Use format like: 700T, 20Qd, 233M";
                errorDiv.classList.remove('hidden');
                resultCard.classList.add('hidden');
                return;
            }

            errorDiv.classList.add('hidden');

            // Calculation
            // Formula: Value Per Second = (Luck * Bulk) / TimePerRoll
            const rollsPerSec = 1 / timePerRoll; // e.g., 4 rolls/sec
            const valuePerSec = luckVal * bulk * rollsPerSec;
            
            const totalSeconds = targetVal / valuePerSec;

            // Display
            timeDisplay.innerText = formatTime(totalSeconds);
            rateDisplay.innerText = `Speed: ${formatNumber(valuePerSec)}/sec`;
            
            resultCard.classList.remove('hidden');
            resultCard.style.animation = 'none';
            resultCard.offsetHeight; /* trigger reflow */
            resultCard.style.animation = 'pulse-red 1s';
        }
    </script>
</body>
</html>
